<div class="item item-video-tag bg-primary" 
     ng-class="{ 'active': playerData.currentTag.id === videoTag.id}" >
    <div class="item-heading row clickable">

        <div class="item-add-tag" ng-click="view(videoTag)" ng-if="playerData.editionMode && videoTag.id === null">
            <p class=" text-success">
                <span class="glyphicon glyphicon-plus-sign"></span> 
                Add a trick
            </p>
        </div>
        <div  ng-if="!playerData.editionMode || videoTag.id !== null">
            <div class="row clickable">
                <div class="col-xs-3">
                    <div class="item-sport">
                        <span ng-if="videoTag.sport_name">
                            <img ng-src="{{videoTag.sport_name| imageUrl}}" 
                                 title="{{videoTag.sport_name}}"
                                 alt="{{videoTag.sport_name}}"/>
                        </span>
                    </div>
                </div>
                <div class="col-xs-7"  ng-click="view(videoTag)">
                    <p class="item-title text-capitalize">
                        {{videoTag.tag_name}}
                    </p>
                    <div class="item-user-xs">
                        <span class="thumbnail-round-xs">
                            <img ng-if="videoTag.rider_picture_round_xs" ng-src="videoTag.rider_picture_round_xs"/>
                        </span>
                        <a  ng-if="videoTag.rider_name" 
                            class="item-user-name text-info text-capitalize">
                            {{videoTag.rider_name}}
                        </a>
                        <a ng-if="!playerData.editionMode && !videoTag.rider_name" 
                           class="item-user-name text-danger"
                           ng-href="#/tag/edit/{{videoTag.video_id}}/{{videoTag.id}}">
                            Add the rider
                        </a>
                    </div>
                </div>
                <div class="col-xs-2">
                    <div class="dropdown" ng-if="!playerData.editionMode">
                        <button class="btn btn-primary" title="Share" data-toggle="dropdown">
                            <span class="glyphicon glyphicon-share"></span> 
                        </button>
                        <ul class="dropdown-menu dropdown-menu-right">
                            <li class="text-bold">
                                <a href=""> Sharing coming soon ...</a>
                            </li>
                            <!--
                            <li>
                                <div facebook 
                                     class="btn-facebook-share" 
                                     data-title='Share this trick'
                                     data-picture-url='http://i.imgur.com/WACv9Cl.jpg' 
                                     ng-url="{{WEBROOT_FULL}}/view/{{videoTag.id}}"
                                     data-shares='shares'>{{ shares}}
                                </div>
                            </li>
                            <li>
                                <a twitter 
                                   data-count='horizontal' 
                                   data-url='{{url}}'  
                                   data-size="medium" 
                                   data-text='{{text}}' >Twitter</a>
                            </li>
                            -->
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-3">
                    <p class="item-category">
                        {{videoTag.category_name}}
                    </p>
                </div>
                <div class="col-xs-7">
                    <div class="text-danger padding-sm" 
                         ng-if="playerData.editionMode && videoTag.id === playerData.currentTag.id" >
                        <span ng-if="videoTag.id"><span class="glyphicon glyphicon-edit"></span> Editing...</span>
                    </div>
                    <div class="padding-sm" 
                         ng-if="playerData.editionMode && videoTag.id !== playerData.currentTag.id" >
                        {{videoTag.begin | secondsToHours}} to {{videoTag.end | secondsToHours}} 
                    </div>
                    <div ng-if="!playerData.editionMode" >

                        <p class="text-muted padding-sm"  ng-show="videoTag.time_to_play > 0">
                            <span>
                                playing in {{videoTag.time_to_play}} seconds.
                            </span>
                        </p>

                        <div  ng-controller="VideoTagPointsController" 
                              ng-show="videoTag.time_to_play == null || videoTag.time_to_play == 0">
                            <button type="button" class="btn btn-primary"  ng-click="down(videoTag)" 
                                    ng-disabled="playerData.currentTag.id !== videoTag.id || videoTag.user_rate === 'loading'"
                                    ng-class="videoTag.user_rate === 'down' ? 'active' : ''">
                                <span class="glyphicon glyphicon-arrow-down"></span>
                            </button>
                            <span class="item-points">
                                {{videoTag.count_points}}
                            </span>
                            <button type="button" 
                                    class="btn btn-primary" 
                                    ng-click="up(videoTag)" 
                                    ng-disabled="playerData.currentTag.id !== videoTag.id || videoTag.user_rate === 'loading'"
                                    ng-class="videoTag.user_rate === 'up' ? 'active' : ''">
                                <span class="glyphicon glyphicon-arrow-up"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-xs-2">
                    <div class="dropdown" ng-if="!playerData.editionMode">
                        <button class="btn btn-primary" data-toggle="dropdown">
                            <b class="caret"></b>
                        </button>
                        <ul class="dropdown-menu nav-stacked nav-pills dropdown-menu-right">
                            <li >
                                <a ng-href="#/video/view/{{videoTag.video_id}}">
                                    <span class="glyphicon glyphicon-play-circle"></span>  
                                    View full video
                                </a>
                            </li>           
                            <li>
                                <a ng-href="#/view/{{videoTag.sport_name}}/{{videoTag.category_name}}/{{videoTag.tag_slug}}">
                                    <span class="glyphicon glyphicon-eye-open"></span>  
                                    View this trick
                                </a>
                            </li>           
                            <!--<li class="divider"></li>-->
                            <li>
                                <a href="" ng-click="openReportErrorModal(videoTag)">
                                    <span class="glyphicon glyphicon-warning-sign"></span> 
                                    Report error
                                </a>
                            </li>
                            <li >
                                <a href="" ng-href="#/tag/edit/{{videoTag.video_id}}/{{videoTag.id}}">
                                    <span class="glyphicon glyphicon-edit"></span> 
                                    Edit
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
